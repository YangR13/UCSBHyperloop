#ifndef SHORT_RANGING_H_
#define SHORT_RANGING_H_

#include "board.h"

#ifdef BOARD_NXP_LPCXPRESSO_1769
#define _ADC_CHANNEL ADC_CH0
#else
#define _ADC_CHANNEL ADC_CH7
#endif
#define _LPC_ADC_ID LPC_ADC
#define _LPC_ADC_IRQ ADC_IRQn
#define _GPDMA_CONN_ADC GPDMA_CONN_ADC

static ADC_CLOCK_SETUP_T ADCSetup;
static volatile uint8_t Burst_Mode_Flag, Interrupt_Continue_Flag;
static volatile uint8_t ADC_Interrupt_Done_Flag, channelTC, dmaChannelNum;
uint32_t DMAbuffer;

void App_print_ADC_value(uint16_t data); // Given function
void convertVoltage(uint16_t data);
void App_DMA_Test(void);
void App_Interrupt_Test(void);
void App_Polling_Test(void); // Given function
void getShortDistance(void);
void ADC_IRQHandler(void);

static const float shortRangingVoltageLUT[] =
{    0.340, 0.350, 0.360, 0.370, 0.380,
     0.390, 0.400, 0.410, 0.420, 0.430,
     0.440, 0.450, 0.460, 0.470, 0.480,
     0.490, 0.500, 0.510, 0.520, 0.530,
     0.540, 0.550, 0.560, 0.570, 0.580,
     0.590, 0.600, 0.610, 0.620, 0.630,
     0.640, 0.650, 0.660, 0.670, 0.680,
     0.690, 0.700, 0.710, 0.720, 0.730,
     0.740, 0.750, 0.760, 0.770, 0.780,
     0.790, 0.800, 0.810, 0.820, 0.830,
     0.840, 0.850, 0.860, 0.870, 0.880,
     0.890, 0.900, 0.910, 0.920, 0.930,
     0.940, 0.950, 0.960, 0.970, 0.980,
     0.990, 1.000, 1.010, 1.020, 1.030,
     1.040, 1.050, 1.060, 1.070, 1.080,
     1.090, 1.100, 1.110, 1.120, 1.130,
     1.140, 1.150, 1.160, 1.170, 1.180,
     1.190, 1.200, 1.210, 1.220, 1.230,
     1.240, 1.250, 1.260, 1.270, 1.280,
     1.290, 1.300, 1.310, 1.320, 1.330,
     1.340, 1.350, 1.360, 1.370, 1.380,
     1.390, 1.400, 1.410, 1.420, 1.430,
     1.440, 1.450, 1.460, 1.470, 1.480,
     1.490, 1.500, 1.510, 1.520, 1.530,
     1.540, 1.550, 1.560, 1.570, 1.580,
     1.590, 1.600, 1.610, 1.620, 1.630,
     1.640, 1.650, 1.660, 1.670, 1.680,
     1.690, 1.700, 1.710, 1.720, 1.730,
     1.740, 1.750, 1.760, 1.770, 1.780,
     1.790, 1.800, 1.810, 1.820, 1.830,
     1.840, 1.850, 1.860, 1.870, 1.880,
     1.890, 1.900, 1.910, 1.920, 1.930,
     1.940, 1.950, 1.960, 1.970, 1.980,
     1.990, 2.000, 2.010, 2.020, 2.030,
     2.040, 2.050, 2.060, 2.070, 2.080,
     2.090, 2.100, 2.110, 2.120, 2.130,
     2.140, 2.150, 2.160, 2.170, 2.180,
     2.190, 2.200, 2.210, 2.220, 2.230,
     2.240, 2.250, 2.260, 2.270, 2.280,
     2.290, 2.300, 2.310, 2.320, 2.330,
     2.340, 2.350, 2.360, 2.370, 2.380,
     2.390, 2.400, 2.410, 2.420, 2.430 };

static const float shortRangingDistanceLUT[] =
{    17.664, 17.139, 16.641, 16.169, 15.719,
     15.292, 14.885, 14.499, 14.130, 13.780,
     13.445, 13.126, 12.822, 12.532, 12.254,
     11.989, 11.735, 11.492, 11.260, 11.037,
     10.823, 10.618, 10.421, 10.232, 10.050,
     9.876, 9.707, 9.545, 9.389, 9.238,
     9.092, 8.951, 8.815, 8.684, 8.557,
     8.433, 8.314, 8.198, 8.085, 7.976,
     7.869, 7.766, 7.665, 7.567, 7.472,
     7.379, 7.288, 7.200, 7.113, 7.029,
     6.946, 6.865, 6.786, 6.709, 6.633,
     6.559, 6.486, 6.415, 6.344, 6.276,
     6.208, 6.142, 6.076, 6.012, 5.949,
     5.887, 5.826, 5.766, 5.707, 5.648,
     5.591, 5.534, 5.478, 5.423, 5.369,
     5.316, 5.263, 5.211, 5.159, 5.109,
     5.058, 5.009, 4.960, 4.912, 4.864,
     4.817, 4.770, 4.724, 4.679, 4.634,
     4.589, 4.546, 4.502, 4.459, 4.417,
     4.375, 4.333, 4.292, 4.251, 4.211,
     4.171, 4.131, 4.092, 4.054, 4.016,
     3.978, 3.940, 3.903, 3.867, 3.830,
     3.794, 3.759, 3.723, 3.689, 3.654,
     3.620, 3.586, 3.552, 3.519, 3.486,
     3.454, 3.421, 3.389, 3.358, 3.326,
     3.295, 3.265, 3.234, 3.204, 3.174,
     3.145, 3.115, 3.086, 3.058, 3.029,
     3.001, 2.973, 2.945, 2.918, 2.891,
     2.864, 2.837, 2.811, 2.785, 2.759,
     2.733, 2.708, 2.683, 2.658, 2.633,
     2.609, 2.584, 2.560, 2.537, 2.513,
     2.490, 2.467, 2.444, 2.421, 2.398,
     2.376, 2.354, 2.332, 2.311, 2.289,
     2.268, 2.247, 2.226, 2.205, 2.185,
     2.165, 2.144, 2.125, 2.105, 2.085,
     2.066, 2.047, 2.028, 2.009, 1.990,
     1.972, 1.954, 1.935, 1.917, 1.900,
     1.882, 1.865, 1.847, 1.830, 1.813,
     1.796, 1.780, 1.763, 1.747, 1.731,
     1.715, 1.699, 1.683, 1.667, 1.652,
     1.636, 1.621, 1.606, 1.591, 1.577,
     1.562, 1.547, 1.533, 1.519, 1.505 };

#endif /* SHORT_RANGING_H_ */
